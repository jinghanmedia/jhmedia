define("article:widget/dom-ready/dom-ready.js",function(e,t){function n(e){var t="http://tts.baidu.com/text2audio?tex=TEXTPLACEHOLDER&cuid=baiduid&lan=zh&ctp=1&pdt=311";if(e=encodeURIComponent(e),9===l.browser.ie||10===l.browser.ie||navigator.userAgent.search("rv:11.0")>-1)for(e=e.slice(0,2e3);;)try{decodeURIComponent(e);break}catch(n){e=e.slice(0,-1)}return t.replace("TEXTPLACEHOLDER",e)}function o(e){return(parseInt(e,10)+p.length)%p.length}function i(e){if(f[e])return f[e];var t=p[e];if(l.dom.getAttr(t,"data-text"))return l.dom.getAttr(t,"data-text");for(var n=t;(n=l.dom.getParent(n))&&!l.dom.hasClass(n,"exp-content-block"););var o=l.trim(l.dom.query(".exp-content-body",n)[0].innerText);return o="END"===o.slice(-3)?o.slice(0,-3):o,f[e]=o,o}function a(e){return e===m?(c.play(),l.dom.addClass(p[m],"playing"),1):(l.dom.removeClass(p[0>m?0:m],"playing"),m=o("next"===e?m+1:e),l.dom.addClass(p[m],"playing"),c.src=n(i(m)),void c.play())}function d(e){l.dom.removeClass(p[e],"playing"),c.pause()}function r(){return"undefined"==typeof Audio?1:(c=new Audio,p.forEach(function(e,t){l.dom.setAttr(e,"data-index",t),l.dom.setStyle(e,"display","inline-block"),l.on(e,"click",function(){var e=parseInt(l.dom.getAttr(this,"data-index"),10);return c.paused||e!==m?(a(e),void s.send(location.href,2019,{module:"article",page:"index",pos:"audio-play",action:"click"})):(d(e),s.send(location.href,2019,{module:"article",page:"index",pos:"audio-pause",action:"click"}),1)})}),c.addEventListener("ended",function(){l.dom.removeClass(p[m],"playing"),m<p.length-1&&a("next")},!1),c.addEventListener("play",function(){s.send(location.href,2019,{module:"article",page:"index",pos:"audio",action:"play"})},!1),void u.on("douwan-video/play",function(){d(m)}))}var c,l=e("common:widget/lib/tangram/base/base.js"),s=e("common:widget/ui/log/log.js"),u=e("common:widget/lib/fis/event/event.js").eventCenter,m=-1,p=l.dom.query(".audio-wp"),f=[];t.init=r});